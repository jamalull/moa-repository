<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <title>Student Grade Apps</title>
  </head>
  <body>
    <div class="container d-flex flex-column gap-4">
      <h1>Perhitungan IPK Mahasiswa (Kampus MIT)</h1>
      <div class="form-group">
        <label for="mataKuliah">Mata Kuliah</label>
        <input
          type="text"
          class="form-control"
          id="mataKuliah"
          placeholder="Masukkan Mata Kuliah"
        />
      </div>
      <div class="form-group">
        <label for="scoreMatkul">Nilai Mata Kuliah</label>
        <input
          type="number"
          class="form-control"
          id="scoreMatkul"
          placeholder="Masukkan Nilai Mata Kuliah"
        />
      </div>
      <button type="button" class="btn btn-success" onclick="calculate()">
        Hitung IPK Akhir
      </button>
      <div class="table-responsive">
        <table class="table table-dark table-hover" aria-describedby="Hasil Perhitungan IPK">
          <thead>
            <tr>
              <!-- <th>No</th> -->
              <th>Mata Kuliah</th>
              <th>Nilai</th>
              <th>Nilai (Dalam Abjad)</th>
              <th>Bobot Nilai</th>
            </tr>
          </thead>
          <tbody id="result">
            <!-- ini adalah output dari result  -->
          </tbody>
        </table>

        <span class="d-flex gap-2">
          <h5 class="badge bg-secondary">IPK Akhir : </h5>
          <h5 id="FinaleIPK"></h5>
        </span>

      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script>
      let grade = "";
      let bobotNilai = [];

      function calculate() {
        const mataKuliah = document.getElementById("mataKuliah").value;
        const scoreMatkul = document.getElementById("scoreMatkul").value;
      
        const result = document.getElementById("result");
        const finaleIPK = document.getElementById("FinaleIPK");

        if(scoreMatkul >= 81 && scoreMatkul <= 100){
          grade = 'A'; bobotNilai.push(4);
        } else if(scoreMatkul >= 78 && scoreMatkul <= 80.99){
          grade = 'A-'; bobotNilai.push(3.7);
        } else if(scoreMatkul >= 75 && scoreMatkul <= 77.99){
          grade = 'B+'; bobotNilai.push(3.3);
        } else if(scoreMatkul >= 70 && scoreMatkul <= 74.99){
          grade = 'B'; bobotNilai.push(3);
        } else if(scoreMatkul >= 65 && scoreMatkul <= 69.99){
          grade = 'B-'; bobotNilai.push(2.7);
        } else if(scoreMatkul >= 60 && scoreMatkul <= 64.99){
          grade = 'C+'; bobotNilai.push(2.3);
        } else if(scoreMatkul >= 55 && scoreMatkul <= 59.99){
          grade = 'C'; bobotNilai.push(2);
        } else if(scoreMatkul >= 40 && scoreMatkul <= 54.99){
          grade = 'D'; bobotNilai.push(1);
        } else if(scoreMatkul >= 0 && scoreMatkul <= 39.99){
          grade = 'E'; bobotNilai.push(0);
        } 
        
        result.innerHTML += `
            <tr>
              <td>${mataKuliah}</td>
              <td>${scoreMatkul}</td>
              <td>${grade}</td>
              <td>${bobotNilai.slice(-1)}</td>
            </tr>
          `;

        let totalIPK = 0;
        bobotNilai.forEach(num => {
          totalIPK += num;
        });

        console.log(bobotNilai)
        console.log(totalIPK)
        finaleIPK.innerHTML = `${(totalIPK/bobotNilai.length).toFixed(2)}`;

        // for (let i = 1; i <= tenor; i++) {
        //   terbayar += cicilan; // terbayar = terbayar + cicilan
        //   terhutang -= cicilan;
        //   result.innerHTML += `
          //   <tr>
          //     <td>${i}</td>
          //     <td>${cicilan}</td>
          //     <td>${terbayar}</td>
          //     <td>${terhutang}</td>
          //   </tr>
          // `;
        // }
      }
    </script>
  </body>
</html>
